import{c as o,aK as C,aL as P,aM as V,a as D,k as K,d as F,j as e,aN as H,aO as J,aP as h,aQ as B,F as l,J as L,aR as E,aS as M}from"./index-9vhxH6Pd.js";import{B as O}from"./ButtonTurnBack-CQ8GiJ0X.js";const d=[{record_id:101,appointment_id:201,height:170,weight:65,blood_pressure:"120/80",temperature:37,heart_rate:78,symptoms:"Ho, sốt nhẹ",initial_diagnosis:"Nghi ngờ viêm họng",final_diagnosis:"Viêm họng cấp",icd10:"J02.9",icd10_value:"Viêm họng cấp, không xác định",notes:"Khuyên uống nhiều nước",date:"10-09-2025"},{record_id:102,appointment_id:202,height:160,weight:55,blood_pressure:"110/70",temperature:36.5,heart_rate:75,symptoms:"Đau đầu, chóng mặt",initial_diagnosis:"Khả năng thiếu máu",final_diagnosis:"Thiếu máu nhẹ",icd10:"D50.9",icd10_value:"Thiếu máu do thiếu sắt, không xác định",notes:"Khuyên bổ sung sắt",date:"01-09-2025"},{record_id:103,appointment_id:203,height:160,weight:55,blood_pressure:"110/70",temperature:36.5,heart_rate:75,symptoms:"Đau đầu, chóng mặt",initial_diagnosis:"Khả năng thiếu máu",final_diagnosis:"Thiếu máu nhẹ",icd10:"D50.9",icd10_value:"Không xác định",notes:"Khuyên bổ sung sắt",date:"01-09-2025"}],$=[{value:"J02.9",label:"J02.9 - Viêm họng cấp, không xác định"},{value:"D50.9",label:"D50.9 - Thiếu máu do thiếu sắt, không xác định"},{value:"R51",label:"R51 - Đau đầu"},{value:"J06.9",label:"J06.9 - Viêm đường hô hấp trên cấp"}],q=[{value:"before",label:"Trước ăn"},{value:"during",label:"Trong bữa ăn"},{value:"after",label:"Sau ăn"}],G=[{key:"1",drug_id:1,drug_name:"Paracetamol 500mg",unit_dosage_id:1,unit_dosage_name:"Viên",dosage:10,dosage_time:["Sáng","Tối"],meal_time:"after",note:"Uống với nhiều nước",duration:3},{key:"2",drug_id:2,drug_name:"Vitamin C 1000mg",unit_dosage_id:1,unit_dosage_name:"Viên",dosage:5,dosage_time:["Sáng","Tối"],meal_time:"before",note:"Uống trước bữa ăn 30 phút",duration:5}],Q=()=>{var c,b,_,p,j,y,f,v;const t=o(C),a=o(P),{data:m}=o(V),x=D(),N={record_id:(a==null?void 0:a.recordId)||0,appointment_id:(a==null?void 0:a.appointment)||0,height:(a==null?void 0:a.height)||0,weight:(a==null?void 0:a.weight)||0,blood_pressure:(a==null?void 0:a.bloodPressure)||"",temperature:(a==null?void 0:a.temperature)||0,heart_rate:(a==null?void 0:a.heartRate)||0,symptoms:(a==null?void 0:a.symptoms)||"",icd10:(a==null?void 0:a.icd10)||"",icd10_value:(a==null?void 0:a.icd10)||"",notes:(a==null?void 0:a.notes)||"",date:(a==null?void 0:a.date)||""};K.useEffect(()=>{a&&T({record_id:(a==null?void 0:a.recordId)||0,appointment_id:(a==null?void 0:a.appointment)||0,height:(a==null?void 0:a.height)||0,weight:(a==null?void 0:a.weight)||0,blood_pressure:(a==null?void 0:a.bloodPressure)||"",temperature:(a==null?void 0:a.temperature)||0,heart_rate:(a==null?void 0:a.heartRate)||0,symptoms:(a==null?void 0:a.symptoms)||"",icd10:(a==null?void 0:a.icd10)||"",icd10_value:(a==null?void 0:a.icd10)||"",notes:(a==null?void 0:a.notes)||"",date:(a==null?void 0:a.date)||""})},[a]);const{control:n,reset:T,formState:{errors:s}}=F({defaultValues:N}),g=(d==null?void 0:d.map(r=>({value:r.record_id,label:e.jsxs(H,{placement:"topLeft",title:`${r.date} - ${r.icd10_value}`,children:[r.date," - ",r.icd10_value]})})))||[],I=r=>{const i=d==null?void 0:d.find(u=>u.record_id==parseInt(r));x(E.setSelectedAppointmentRecord(i)),x(M.setPrescriptionss(G))},k=r=>{console.log("search:",r)},w=[{title:e.jsx("span",{children:"Thuốc"}),dataIndex:"drug_id",render:(r,i)=>i.drug_name},{title:"Liều dùng",dataIndex:"dosage",render:(r,i)=>i.dosage},{title:"Đơn vị",dataIndex:"unit_dosage_id",render:(r,i)=>i.unit_dosage_name},{title:"Số ngày",dataIndex:"duration",render:(r,i)=>i.duration},{title:"Thời gian uống",dataIndex:"dosage_time",render:(r,i)=>{var u;return(u=i.dosage_time)==null?void 0:u.join(", ")}},{title:"So với bữa ăn",dataIndex:"meal_time",render:(r,i)=>{var u;return(u=q.find(S=>S.value===i.meal_time))==null?void 0:u.label}},{title:"Hướng dẫn thêm",dataIndex:"note",render:(r,i)=>i.note}];return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 left-0",children:e.jsx("div",{className:"flex items-center justify-start gap-3",children:e.jsx(O,{link:"/manager/patients"})})}),t&&e.jsxs("div",{className:"pt-12 flex flex-col gap-3",children:[e.jsx(J,{title:"Thông tin bệnh nhân",children:e.jsxs(h,{bordered:!0,column:3,children:[e.jsx(h.Item,{label:"Họ tên",children:t.fullName}),e.jsx(h.Item,{label:"Ngày sinh",children:t.dob}),e.jsx(h.Item,{label:"Giới tính",children:t.gender}),e.jsx(h.Item,{label:"Mã BHYT",children:t.insuranceCode}),e.jsx(h.Item,{label:"Số điện thoại",children:t.phoneNumber}),e.jsx(h.Item,{label:"Người liên hệ",children:t.emergencyContact}),e.jsx(h.Item,{label:"Nghề nghiệp",children:t.job}),e.jsx(h.Item,{label:"Địa chỉ",children:t.address})]})}),(g==null?void 0:g.length)>0?e.jsxs("div",{className:"bg-white p-3 px-6 rounded-md",children:[e.jsx("p",{className:"font-semibold mb-2 pb-2 border-b border-gray-100",children:"Lịch sử khám bệnh"}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx(B,{showSearch:!0,placeholder:"Chọn buổi khám",optionFilterProp:"label",onChange:I,onSearch:k,options:g,style:{minWidth:"180px",maxWidth:"210px"}})}),a&&e.jsxs("div",{children:[e.jsxs("form",{className:"space-y-4 h-[92%] overflow-y-auto p-3 bg-slate-50 rounded-md mt-3",children:[e.jsx("p",{className:"px-2 bg-slate-300 inline-block rounded-md",children:"Kết quả khám"}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsx(l,{name:"height",control:n,label:"Chiều cao (cm)",placeholder:"Nhập chiều cao",type:"text",inputType:"number",error:!!s.height,helperText:(c=s.height)==null?void 0:c.message}),e.jsx(l,{name:"weight",control:n,label:"Cân nặng (kg)",placeholder:"Nhập cân nặng",type:"text",inputType:"number",error:!!s.weight,helperText:(b=s.weight)==null?void 0:b.message}),e.jsx(l,{name:"blood_pressure",control:n,label:"Huyết áp",placeholder:"Ví dụ: 120/80",type:"text",inputType:"text",error:!!s.blood_pressure,helperText:(_=s.blood_pressure)==null?void 0:_.message}),e.jsx(l,{name:"temperature",control:n,label:"Nhiệt độ (°C)",placeholder:"Nhập nhiệt độ",type:"text",inputType:"number",error:!!s.temperature,helperText:(p=s.temperature)==null?void 0:p.message}),e.jsx(l,{name:"heart_rate",control:n,label:"Nhịp tim (lần/phút)",placeholder:"Nhập nhịp tim",type:"text",inputType:"number",error:!!s.heart_rate,helperText:(j=s.heart_rate)==null?void 0:j.message})]}),e.jsx(l,{name:"symptoms",control:n,label:"Triệu chứng",placeholder:"Nhập triệu chứng",type:"text",error:!!s.symptoms,helperText:(y=s.symptoms)==null?void 0:y.message}),e.jsx(l,{name:"icd10",control:n,label:"Mã ICD-10",type:"text",options:$,placeholder:"Chọn mã ICD-10",required:!0,error:!!s.icd10,helperText:(f=s.icd10)==null?void 0:f.message}),e.jsx(l,{name:"notes",control:n,label:"Ghi chú",placeholder:"Nhập ghi chú",type:"text",error:!!s.notes,helperText:(v=s.notes)==null?void 0:v.message})]}),e.jsxs("div",{className:"bg-slate-50 rounded-md mt-3 p-3",children:[e.jsx("p",{className:"px-2 bg-slate-300 inline-block rounded-md my-3",children:"Đơn thuốc"}),m.length>0?e.jsx(L,{bordered:!0,dataSource:m,columns:w,pagination:!1,rowClassName:"editable-row"}):e.jsx("div",{className:"bg-white p-3 rounded-md",children:e.jsx("p",{className:"font-bold",children:"Buổi khám không có đơn thuốc."})})]})]})]}):e.jsx("div",{className:"bg-white p-3 rounded-md",children:e.jsx("p",{className:"font-bold",children:"Hiện chưa có lịch sử khám nào được ghi nhận cho bệnh nhân này."})})]})]})};export{Q as default};
