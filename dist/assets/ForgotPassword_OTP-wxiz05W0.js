import{h as N,b as v,a as T,c as P,m as n,d as S,o as w,w as O,j as e,L as F,F as L,i as E,t as M,x as _}from"./index-aTwABVSH.js";import{s as k}from"./auth.selector-CI4QvMOx.js";const X=()=>{var h;let s=N();const a=v(),l=T(),u=P(k),[o,i]=n.useState(90),[c,m]=n.useState(!1),d=t=>{console.log(t),l(_({phone:s==null?void 0:s.phone_number,otp:t==null?void 0:t.otp,action:r=>a(r,{replace:!0})}))};n.useEffect(()=>{if(o>0){const t=setTimeout(()=>i(o-1),1e3);return()=>clearTimeout(t)}else m(!0)},[o]);const p=t=>{const r=Math.floor(t/60),y=t%60;return`${r}:${y.toString().padStart(2,"0")}`},b=()=>{i(90),m(!1),l(M({phone:s==null?void 0:s.phone_number,action:t=>a(t)}))},{control:f,handleSubmit:g,formState:{errors:x,isSubmitting:j}}=S({resolver:w(O),defaultValues:{otp:""}});return e.jsxs("div",{className:"relative flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 via-blue-200 to-blue-300",children:[e.jsx("div",{className:"absolute inset-0 bg-white/40 backdrop-blur-sm"}),e.jsxs("form",{onSubmit:g(d),className:"relative w-full max-w-xl bg-white rounded-2xl px-8 py-6 space-y-5 z-10 shadow-2xl max-h-[93vh] flex flex-col",children:[u&&e.jsx(F,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Xác thực số điện thoại"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Nhập mã OTP đã được gửi đến số điện thoại"," ",e.jsx("b",{className:"text-gray-900",children:s==null?void 0:s.phone_number}),"."]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(L,{name:"otp",control:f,label:"",type:"input",inputType:"otp",lengthNumberOtp:6,helperText:(h=x.otp)==null?void 0:h.message,error:!!x.otp})}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:c?e.jsx("span",{className:"text-red-500",children:"Mã OTP đã hết hạn"}):e.jsxs("span",{children:["Mã OTP sẽ hết hạn sau"," ",e.jsx("b",{className:"text-gray-800",children:p(o)})]})}),e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx(E,{type:"primary",htmlType:"submit",className:"btn-primary w-1/2 py-2",disabled:j||c,children:"Xác thực"}),e.jsx("button",{type:"button",onClick:b,className:"text-blue-600 hover:underline text-sm",children:"Gửi lại mã OTP"})]})]})]})};export{X as default};
