import{g as N,b as v,a as S,c as T,k as a,d as k,o as O,m as _,j as e,L as P,F as w,h as L,i as E,v as F}from"./index-9vhxH6Pd.js";import{s as M}from"./auth.selector-nhYsiCtG.js";const V=()=>{var h;let s=N();const o=v(),i=S(),x=T(M),[n,c]=a.useState(90),[l,m]=a.useState(!1),p=t=>{console.log("data: "),console.log(t),i(F({otp_code:t==null?void 0:t.otp,phone_number:s==null?void 0:s.phone_number,action:r=>o(r,{replace:!0})}))};a.useEffect(()=>{if(n>0){const t=setTimeout(()=>c(n-1),1e3);return()=>clearTimeout(t)}else m(!0)},[n]);const d=t=>{const r=Math.floor(t/60),y=t%60;return`${r}:${y.toString().padStart(2,"0")}`},g=()=>{c(90),m(!1),i(E({phone_number:s==null?void 0:s.phone_number,action:t=>o(t)}))},{control:b,handleSubmit:f,formState:{errors:u,isSubmitting:j}}=k({resolver:O(_),defaultValues:{otp:""}});return e.jsxs("div",{className:"relative flex items-center justify-center min-h-screen bg-cover bg-center",style:{backgroundImage:"url('https://png.pngtree.com/thumb_back/fh260/background/20240426/pngtree-a-doctor-using-smart-phone-during-quick-a-break-in-a-image_15672091.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsxs("form",{onSubmit:f(p),className:"relative w-full max-w-xl bg-white rounded-2xl px-8 py-6 space-y-5 z-10 shadow-2xl max-h-[93vh] flex flex-col",children:[x&&e.jsx(P,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Xác thực số điện thoại"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Nhập mã OTP đã được gửi đến số điện thoại"," ",e.jsx("b",{className:"text-gray-900",children:s==null?void 0:s.phone_number}),"."]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(w,{name:"otp",control:b,label:"",type:"input",inputType:"otp",lengthNumberOtp:4,helperText:(h=u.otp)==null?void 0:h.message,error:!!u.otp})}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:l?e.jsx("span",{className:"text-red-500",children:"Mã OTP đã hết hạn"}):e.jsxs("span",{children:["Mã OTP sẽ hết hạn sau"," ",e.jsx("b",{className:"text-gray-800",children:d(n)})]})}),e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx(L,{type:"primary",htmlType:"submit",className:"btn-primary w-1/2 py-2",disabled:j||l,children:"Xác thực"}),e.jsx("button",{type:"button",onClick:g,className:"text-blue-600 hover:underline text-sm",children:"Gửi lại mã OTP"})]})]})]})};export{V as default};
