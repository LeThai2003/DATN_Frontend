import{a as M,c as w,cd as V,n as H,aV as d,k as L,d as W,o as B,j as e,aO as R,a8 as X,a9 as I,L as q,F as n,h as i,aW as h,aN as _,cD as S}from"./index-LvNQFVEu.js";import{W as $}from"./WelcomeCard-sO44yQFy.js";import{p as G}from"./appointment.validate-C4mStPwH.js";const Z=()=>{var x,g,b,j,y,N,C,T,k;const o=M(),r=w(V),m=w(H),[p]=d.useForm(),[t,f]=L.useState(!1),F=a=>{let c={...r};c.password=a==null?void 0:a.newPassword,console.log(c),o(S({data:c,id:r==null?void 0:r.patientId}))},D=()=>{p.resetFields()},z=a=>{console.log(a),a.status="ACTIVE",a.roleId="51db1034-54ee-4a35-83a5-f479f430bec8",o(S({data:a,id:r==null?void 0:r.patientId}))},{control:l,handleSubmit:A,reset:E,formState:{errors:s,isSubmitting:u}}=W({resolver:B(G),defaultValues:{fullName:(r==null?void 0:r.fullName)||"",phoneNumber:(r==null?void 0:r.phoneNumber)||"",citizenId:(r==null?void 0:r.citizenId)||"",insuranceCode:(r==null?void 0:r.insuranceCode)||"",job:(r==null?void 0:r.job)||"",dob:(r==null?void 0:r.dob)||"",gender:(r==null?void 0:r.gender)||!0,address:(r==null?void 0:r.address)||"",emergencyContact:(r==null?void 0:r.emergencyContact)||""}});return e.jsx("div",{className:"relative",children:e.jsx("div",{className:"container min-h-screen",children:e.jsxs("div",{className:"pt-[86px]",children:[e.jsx($,{name:r==null?void 0:r.fullName}),e.jsx("section",{className:"py-2",children:e.jsx(R,{title:"Tài khoản cá nhân",children:e.jsxs(X,{defaultActiveKey:"1",children:[e.jsx(I,{tab:"Thông tin tài khoản",children:e.jsx("div",{className:"mt-4 p-4 rounded-md bg-slate-50",children:e.jsxs("form",{onSubmit:A(z),className:"relative flex flex-col gap-5 max-h-[700px] overflow-y-auto",children:[m&&e.jsx(q,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{name:"fullName",control:l,label:"Họ và tên",placeholder:"Nhập họ và tên",inputType:"text",type:t?"input":"text",error:!!s.fullName,helperText:(x=s.fullName)==null?void 0:x.message,required:!0}),e.jsx(n,{name:"phoneNumber",control:l,label:"Số điện thoại",placeholder:"Nhập số điện thoại",inputType:"text",type:t?"input":"text",error:!!s.phoneNumber,helperText:(g=s.phoneNumber)==null?void 0:g.message,required:!0}),e.jsx(n,{name:"dob",control:l,label:"Ngày sinh",placeholder:"Chọn ngày sinh",type:t?"datepicker":"text",error:!!s.dob,helperText:(b=s.dob)==null?void 0:b.message,required:!0}),e.jsx(n,{name:"gender",control:l,label:"Giới tính",placeholder:"Chọn giới tính",type:t?"select":"text",options:[{label:"Nam",value:!0},{label:"Nữ",value:!1}],error:!!s.gender,helperText:(j=s.gender)==null?void 0:j.message,required:!0}),e.jsx(n,{name:"citizenId",control:l,label:"CCCD/CMND",placeholder:"Nhập số CCCD/CMND",inputType:"text",type:t?"input":"text",error:!!s.citizenId,helperText:(y=s.citizenId)==null?void 0:y.message,required:!0}),e.jsx(n,{name:"insuranceCode",control:l,label:"Mã bảo hiểm y tế",placeholder:"Nhập mã BHYT",inputType:"text",type:t?"input":"text",error:!!s.insuranceCode,helperText:(N=s.insuranceCode)==null?void 0:N.message,required:!0}),e.jsx(n,{name:"job",control:l,label:"Nghề nghiệp",placeholder:"Nhập nghề nghiệp",inputType:"text",type:t?"input":"text",error:!!s.job,helperText:(C=s.job)==null?void 0:C.message,required:!0}),e.jsx(n,{name:"emergencyContact",control:l,label:"SĐT liên hệ khẩn cấp",placeholder:"Nhập số điện thoại khẩn cấp",inputType:"text",type:t?"input":"text",error:!!s.emergencyContact,helperText:(T=s.emergencyContact)==null?void 0:T.message,required:!0}),e.jsx(n,{name:"address",control:l,label:"Địa chỉ",placeholder:"Nhập địa chỉ",inputType:"text",type:t?"input":"text",error:!!s.address,helperText:(k=s.address)==null?void 0:k.message,required:!0})]}),e.jsx("div",{className:"w-full flex items-center justify-end",children:t?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"primary",disabled:u,htmlType:"submit",children:"Cập nhật thông tin"}),e.jsx(i,{type:"dashed",color:"primary",disabled:u,onClick:()=>E(),children:"Hoàn tác"})]}):e.jsx(i,{type:"primary",onClick:()=>f(!0),children:"Chỉnh sửa"})})]})})},"1"),e.jsx(I,{tab:"Thay đổi mật khẩu",children:e.jsx("div",{className:"relative mt-4 p-4 rounded-md bg-slate-50",children:e.jsxs(d,{form:p,layout:"vertical",onFinish:F,style:{maxWidth:400},children:[m&&e.jsx(q,{}),e.jsx(d.Item,{label:"Mật khẩu hiện tại",name:"oldPassword",rules:[{required:!0,message:"Vui lòng nhập mật khẩu hiện tại."}],children:e.jsx(h.Password,{})}),e.jsx(d.Item,{label:"Mật khẩu mới",name:"newPassword",rules:[{required:!0,message:"Vui lòng nhập mật khẩu mới"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]).+$/,message:"Mật khẩu phải chứa ít nhất 1 chữ hoa, 1 chữ thường, 1 số và 1 ký tự đặc biệt."}],children:e.jsx(h.Password,{})}),e.jsx(d.Item,{label:"Xác nhận mật khẩu mới",name:"confirmPassword",dependencies:["newPassword"],rules:[{required:!0,message:"Vui lòng nhập xác nhận mật khẩu mới."},({getFieldValue:a})=>({validator(c,v){return!v||a("newPassword")===v?Promise.resolve():Promise.reject(new Error("Xác nhận mật khẩu chưa chính xác!"))}})],children:e.jsx(h.Password,{})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 border-t border-gray-200 pt-4",children:[e.jsx(d.Item,{className:"mb-0",children:e.jsx(i,{type:"primary",htmlType:"submit",children:"Đổi mật khẩu"})}),e.jsx(d.Item,{className:"mb-0",children:e.jsx(_,{title:"Làm mới các trường.",children:e.jsx(i,{variant:"dashed",color:"primary",onClick:D,children:"Hoàn tác"})})})]})]})})},"2")]})})})]})})})};export{Z as default};
