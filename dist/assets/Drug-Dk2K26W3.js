import{a as H,c as x,C as se,D as te,E as ae,G as le,k as j,H as P,I as _,j as e,h as o,J as T,P as I,K as v,M as c,N as d,O as ne,S as O,Q as A,T as E,U as ie,V as S,W as oe,X as ce,Y as de,Z as re,_ as he,$ as G,a0 as u,a1 as ge,a2 as pe,a3 as xe,a4 as me,a5 as L,a6 as w,a7 as ue,a8 as je,a9 as $}from"./index-9vhxH6Pd.js";import{F as U,a as z}from"./FilterForm-CtQKhhuC.js";import{R as b}from"./EditOutlined-DfDe4u8h.js";const ye=()=>{const s=H(),a=x(se),n=x(te),r=x(ae),h=x(le),[g,y]=j.useState(!1),[F,f]=j.useState(!1),M=t=>{s(v.setSelectDosageTime(t)),s(c.setShowModal({type:d.DOSAGE_TIME,variant:"edit",data:t}))},D=t=>{s(v.setSelectDosageTime(t)),s(c.setShowModal({type:d.DOSAGE_TIME,variant:"delete",data:t}))},k=()=>{s(v.setSelectDosageTime(null)),s(c.setShowModal({type:d.DOSAGE_TIME,variant:"add",data:null}))},C=t=>{s(v.setSelectDosageTime(t)),s(c.setShowModal({type:d.DOSAGE_TIME,variant:"view",data:t}))},N=[{title:"Thời gian",dataIndex:"name",key:"name",width:200},{title:"Mô tả",dataIndex:"description",key:"description",ellipsis:!0},{title:"Hành động",key:"actions",width:"150px",render:(t,p)=>e.jsxs(O,{size:"small",children:[e.jsx(o,{color:"primary",variant:"filled",icon:e.jsx(A,{}),onClick:()=>{C(p)},className:"",size:"small"}),e.jsx(o,{type:"primary",icon:e.jsx(b,{}),onClick:()=>{M(p)},className:"bg-blue-500 hover:bg-blue-600",size:"small"}),e.jsx(o,{danger:!0,icon:e.jsx(E,{}),onClick:()=>{D(p)},size:"small"})]})}],R=[{key:"search",type:"text",placeholder:"Tìm kiếm thời gian uống"}],i=(t,p)=>{s(v.setFilterDosageTimes({...a,[t]:p})),s(P())},l=()=>{s(v.setFilterDosageTimes(ne)),s(P())},m=()=>{console.log(a)},K=t=>{s(ie(t-1))},V=t=>{s(S.setSelectMealRelation(t)),s(c.setShowModal({type:d.MEAL_RELATION,variant:"edit",data:t}))},B=t=>{s(S.setSelectMealRelation(t)),s(c.setShowModal({type:d.MEAL_RELATION,variant:"delete",data:t}))},Q=()=>{s(S.setSelectMealRelation(null)),s(c.setShowModal({type:d.MEAL_RELATION,variant:"add",data:null}))},W=t=>{s(S.setSelectMealRelation(t)),s(c.setShowModal({type:d.MEAL_RELATION,variant:"view",data:t}))},J=[{title:"Thời điểm",dataIndex:"name",key:"name",width:200},{title:"Mô tả",dataIndex:"description",key:"description",ellipsis:!0},{title:"Hành động",key:"actions",width:"150px",render:(t,p)=>e.jsxs(O,{size:"small",children:[e.jsx(o,{color:"primary",variant:"filled",icon:e.jsx(A,{}),onClick:()=>{W(p)},className:"",size:"small"}),e.jsx(o,{type:"primary",icon:e.jsx(b,{}),onClick:()=>{V(p)},className:"bg-blue-500 hover:bg-blue-600",size:"small"}),e.jsx(o,{danger:!0,icon:e.jsx(E,{}),onClick:()=>{B(p)},size:"small"})]})}],X=[{key:"search",type:"text",placeholder:"Tìm kiếm thời gian uống"}],Y=(t,p)=>{s(S.setFilterMealRealtions({...n,[t]:p})),s(_())},Z=()=>{s(S.setFilterMealRealtions(oe)),s(_())},q=()=>{console.log(n)},ee=t=>{console.log(t),s(ce(t-1))};return j.useEffect(()=>{s(P()),s(_())},[]),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"p-2 bg-white rounded-lg flex flex-col gap-3 max-h-[82vh]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Thời điểm uống thuốc"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"primary",onClick:k,children:"+ Thêm mới"}),!g&&e.jsx(U,{onClick:()=>y(!0)})]})]}),g&&e.jsx(z,{fields:R,values:a,onChange:i,onReset:l,onApply:m,onClose:()=>y(!1)}),e.jsxs("div",{className:"h-full",children:[e.jsx(T,{columns:N,dataSource:r==null?void 0:r.data,loading:r==null?void 0:r.loadingPage,rowKey:"time_id",pagination:!1,scroll:{y:window.innerHeight*.82-162}}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(I,{current:a==null?void 0:a.pageNo,pageSize:a==null?void 0:a.pageSize,onChange:t=>{K(t)},total:r==null?void 0:r.totalPage})})]})]}),e.jsxs("div",{className:"p-2 bg-white rounded-lg flex flex-col gap-3 max-h-[82vh]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Uống so với bữa ăn"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"primary",onClick:Q,children:"+ Thêm mới"}),!g&&e.jsx(U,{onClick:()=>f(!0)})]})]}),F&&e.jsx(z,{fields:X,values:n,onChange:Y,onReset:Z,onApply:q,onClose:()=>f(!1)}),e.jsxs("div",{className:"h-full",children:[e.jsx(T,{columns:J,dataSource:(h==null?void 0:h.data)||[],loading:h==null?void 0:h.loadingPage,rowKey:"relationId",pagination:!1,scroll:{y:window.innerHeight*.82-160}}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(I,{current:n==null?void 0:n.pageNo,pageSize:n==null?void 0:n.pageSize,onChange:t=>{ee(t)},total:h==null?void 0:h.totalPage})})]})]})]})},fe=()=>{const s=H(),a=x(de),[n,r]=j.useState(!1),h=x(re),g=x(he);console.log(g);const y=l=>{s(u.setSelectDrug(l)),s(c.setShowModal({type:d.DRUG,variant:"delete",data:l}))},F=()=>{s(u.setSelectDrug(null)),s(c.setShowModal({type:d.DRUG,variant:"add",data:null}))},f=l=>{s(u.setSelectDrug(l)),s(c.setShowModal({type:d.DRUG,variant:"view",data:l}))},M=l=>{s(u.setSelectDrug(l)),s(c.setShowModal({type:d.DRUG,variant:"edit",data:l}))},D=[{title:"Tên thuốc",dataIndex:"name",key:"name"},{title:"Hoạt chất",dataIndex:"genericName",key:"generic_name"},{title:"Quy cách",dataIndex:"packing",key:"packaging"},{title:"Tác dụng phụ",dataIndex:"sideEffects",key:"side_effects"},{title:"Hành động",key:"actions",width:"150px",render:(l,m)=>e.jsxs(O,{size:"small",children:[e.jsx(o,{color:"primary",variant:"filled",icon:e.jsx(A,{}),onClick:()=>{f(m)},className:"",size:"small"}),e.jsx(o,{type:"primary",icon:e.jsx(b,{}),onClick:()=>{M(m)},className:"bg-blue-500 hover:bg-blue-600",size:"small"}),e.jsx(o,{danger:!0,icon:e.jsx(E,{}),onClick:()=>{y(m)},size:"small"})]})}],k=[{key:"search",type:"text",placeholder:"Tìm kiếm thuốc"},{key:"order",type:"select",placeholder:"Sắp xếp",options:[{label:"Tên tăng dần",value:"asc"},{label:"Tên giảm dần",value:"desc"}]}],C=(l,m)=>{s(u.setFilterDrug({...a,[l]:m})),s(G())},N=()=>s(u.setFilterDrug({initFilterDrug:ge})),R=()=>{console.log(a)},i=l=>{s(pe(l-1))};return j.useEffect(()=>{s(G())},[]),e.jsxs("div",{className:"p-2 bg-white rounded-lg flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Danh sách thuốc"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"primary",onClick:F,children:"+ Thêm mới"}),!n&&e.jsx(U,{onClick:()=>r(!0)})]})]}),n&&e.jsx(z,{fields:k,values:a,onChange:C,onReset:N,onApply:R,onClose:()=>r(!1)}),e.jsx(T,{columns:D,dataSource:(g==null?void 0:g.data)||[],rowKey:"drugId",loading:h,pagination:!1,scroll:{x:"max-content",y:window.innerHeight*.82-160}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{current:(a==null?void 0:a.pageNo)+1,pageSize:10,onChange:l=>{i(l)},total:(g==null?void 0:g.totalPage)*10})})]})},ve=()=>{const s=H(),a=x(xe),n=x(me),[r,h]=j.useState(!1),g=i=>{s(w.setSelectUnit(i)),s(c.setShowModal({type:d.UNIT,variant:"edit",data:i}))},y=i=>{s(w.setSelectUnit(i)),s(c.setShowModal({type:d.UNIT,variant:"delete",data:i}))},F=()=>{s(w.setSelectUnit(null)),s(c.setShowModal({type:d.UNIT,variant:"add",data:null}))},f=i=>{s(w.setSelectUnit(i)),s(c.setShowModal({type:d.UNIT,variant:"view",data:i}))},M=[{title:"Đơn vị",dataIndex:"name",key:"name",width:200},{title:"Mô tả",dataIndex:"description",key:"description",ellipsis:!0,onCell:()=>({style:{maxWidth:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})},{title:"Hành động",key:"actions",width:"150px",render:(i,l)=>e.jsxs(O,{size:"small",children:[e.jsx(o,{color:"primary",variant:"filled",icon:e.jsx(A,{}),onClick:()=>{f(l)},className:"",size:"small"}),e.jsx(o,{type:"primary",icon:e.jsx(b,{}),onClick:()=>{g(l)},className:"bg-blue-500 hover:bg-blue-600",size:"small"}),e.jsx(o,{danger:!0,icon:e.jsx(E,{}),onClick:()=>{y(l)},size:"small"})]})}],D=[{key:"search",type:"text",placeholder:"Tìm kiếm đơn vị"}],k=(i,l)=>{s(w.setFilterUnit({...n,[i]:l})),s(L())},C=()=>s(w.setFilterUnit({initFilterUnit:ue})),N=()=>{},R=i=>{console.log(i),s(u.setFilterDrug({...n,pageNo:i-1}))};return j.useEffect(()=>{s(L())},[]),e.jsxs("div",{className:"p-2 bg-white rounded-lg flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Danh sách đơn vị thuốc"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"primary",onClick:F,children:"+ Thêm mới"}),!r&&e.jsx(U,{onClick:()=>h(!0)})]})]}),r&&e.jsx(z,{fields:D,values:n,onChange:k,onReset:C,onApply:N,onClose:()=>h(!1)}),e.jsx(T,{columns:M,loading:a==null?void 0:a.loadingPage,dataSource:a==null?void 0:a.data,rowKey:"unit_id",pagination:!1,scroll:{x:"max-content",y:window.innerHeight*.82-160}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{current:(n==null?void 0:n.pageNo)+1,pageSize:(n==null?void 0:n.pageSize)||10,onChange:i=>{R(i)},total:a==null?void 0:a.totalPage})})]})},Me=()=>e.jsx(e.Fragment,{children:e.jsxs(je,{defaultActiveKey:"1",children:[e.jsx($,{tab:"Thuốc",children:e.jsx(fe,{})},"1"),e.jsx($,{tab:"Đơn vị thuốc",children:e.jsx(ve,{})},"2"),e.jsx($,{tab:"Thời điểm uống thuốc",children:e.jsx(ye,{})},"3")]})});export{Me as default};
